from matplotlib import pyplot
import time


# buff = [0,378,1067,4095,4095,4095,4095,4095,4095,3568,3747,2122,0,0,0,0,0,0,17,455,1248,4095,4095,4095,4095,4095,4095,4089,3238,1737,0,0,0,0,0,0,112,669,2496,4095,4095,4095,4095,4095,4095,4022,2692,0,0,0,0,0,0,0,197,1050,4095,4095,4095,4095,4095,4095,4095,3440,2190,0,0,0,0,0,0,542,414,1121,4095,4095,4095,4095,4095,4095,3623,3125,2006,0,0,0,0,0,0,225,446,1391,4095,4095,4095,4095,4095,4095,4021,3041,1377,0,0,0,0,0,0,0,671,3023,4095,4095,4095,4095,4095,4095,4095,2559,0,0,0,0,0,0,0,159,1035,4095,4095,4095,4095,4095,4095,3759,2960,2194,0,0,0,0,0,0,212,467,1404,4095,4095,4095,4095,4095,4095,3963,3029,2016,0,0,0,0,0,0,359,402,1485,4095,4095,4095,4095,4095,4095,3994,2864,1106,0,0,0,0,0,0,66,528,3705,4095,4095,4095,4095,4095,4095,4011,2410,0,0,0,0,0,0,0,403,1152,4095,4095,4095,4095,4095,4095,3600,3414,2031,0,0,0,0,0,0,79,482,1187,4095,4095,4095,4095,4095,4095,3848,2929,1858,0,0,0,0,0,0,208,655,1747,4095,4095,4095,4095,4095,4095,3689,2947,583,0,0,0,0,0,0,0,764,4095,4095,4095,4095,4095,4095,4095,3824,2515,0,0,0,0,0,0,196,317,1136,4095,4095,4095,4095,4095,4095,3751,2960,2059,0,0,0,0,0,0,112,546,1470,4095,4095,4095,4095,4095,4095,4095,2901,1808,0,0,0,0,0,0,333,454,1996,4095,4095,4095,4095,4095,4095,3755,2800,161,0,0,0,0,0,0,287,748,4095,4095,4095,4095,4095,4095,4095,3637,2187,0,0,0,0,0,0,270,272,1193,4095,4095,4095,4095,4095,4095,3734,3208,1978,0,0,0,0,0,0,18,672,1519,4095,4095,4095,4095,4095,4095,3647,2807,1573,0,0,0,0,0,0,224,626,2576,4095,4095,4095,4095,4095,4095,3824,2766,0,0,0,0,0,0,0,97,816,4095,4095,4095,4095,4095,4095,3669,3442,2382,0,0,0,0,0,0,395,351,1139,4095,4095,4095,4095,4095,4095,4087,3071,1808,0,0,0,0,0,0,186,637,1664,4095,4095,4095,4095,4095,4095,3987,2852,1157,0,0,0,0,0,0,190,592,2945,4095,4095,4095,4095,4095,4095,3392,2702,0,0,0,0,0,0,0,309,1056,4095,4095,4095,4095,4095,4095,3415,3487,2194,0,0,0,0,0,0,445,240,1328,4095,4095,4095,4095,4095,4095,4095,3191,1942,0,0,0,0,0,0,25,531,1762,4095,4095,4095,4095,4095,4095,3951,2795,832,0,0,0,0,0,0,364,893,3862,4095,4095,4095,4095,4095,4095,3922,2361,0,0,0,0,0,0,81,368,981,4095,4095,4095,4095,4095,4095,3135,3408,2293,0,0,0,0,0,0,311,558,1259,4095,4095,4095,4095,4095,4095,4095,3062,1683,0,0,0,0,0,0,108,592,1936,4095,4095,4095,4095,4095,4095,4095,2896,421,0,0,0,0,0,0,184,811,4095,4095,4095,4095,4095,4095,4095,3410,2289,0,0,0,0,0,0,263,567,1148,4095,4095,4095,4095,4095,4095,3583,3133,2081,0,0,0,0,0,0,64,352,1279,4095,4095,4095,4095,4095,4095,3821,3110,1755,0,0,0,0,0,0,221,554,2261,4095,4095,4095,4095,4095,4095,3971,2723,0,0,0,0,0,0,0,217,1040,4095,4095,4095,4095,4095,4095,4095,3289,2268,0,0,0,0,0,0,342,401,1198,4095,4095,4095,4095,4095,4095,3542,3104,2107,0,0,0,0,0,0,231,313,1452,4095,4095,4095,4095,4095,4095,3892,2944,1546,0,0,0,0,0,0,42,587,2923,4095,4095,4095,4095,4095,4095,4095,2767,0,0,0,0,0,0,0,246,985,4095,4095,4095,4095,4095,4095,3857,3358,2009,0,0,0,0,0,0,521,496,1546,4095,4095,4095,4095,4095,4095,3894,3151,1950,0,0,0,0,0,0,99,624,1407,4095,4095,4095,4095,4095,4095,3978,2955,1120,0,0,0,0,0,0,167,584,3390,4095,4095,4095,4095,4095,4095,3663,2455,0,0,0,0,0,0,0,176,1187,4095,4095,4095,4095,4095,4095,3583,3361,2159,0,0,0,0,0,0,134,475,1115,4095,4095,4095,4095,4095,4095,4064,2919,1856,0,0,0,0,0,0,334,720,1778,4095,4095,4095,4095,4095,4095,3907,2768,497,0,0,0,0,0,0,187,720,4095,4095,4095,4095,4095,4095,4095,3754,2490,0,0,0,0,0,0,155,531,1082,4095,4095,4095,4095,4095,4095,3442,3095,1861,0,0,0,0,0,0,178,456,1456,4095,4095,4095,4095,4095,4095,3901,2913,1744,0,0,0,0,0,0,112,560,1971,4095,4095,4095,4095,4095,4095,3946,2736,124,0,0,0,0,0,0,234,911,4095,4095,4095,4095,4095,4095,4095,3431,2086,0,0,0,0,0,0,337,437,1279,4095,4095,4095,4095,4095,4095,3779,3083,2007,0,0,0,0,0,0,53,607,1398,4095,4095,4095,4095,4095,4095,3702,2930,1477,0,0,0,0,0,0,322,723,2617,4095,4095,4095,4095,4095,4095,3894,2576,0,0,0,0,0,0,0,149,946,4095,4095,4095,4095]
# buff = [0,4,431,790,978,1002,1221,1156,1011,527,315,0,0,0,0,0,0,0,16,87,635,803,1051,1200,1141,1085,766,461,227,0,0,0,0,0,0,0,13,109,639,819,981,1274,1137,922,783,320,199,0,0,0,0,0,0,0,16,193,696,880,770,1182,1073,849,586,320,0,0,0,0,0,0,0,0,0,529,765,990,1037,1193,1083,1030,473,272,0,0,0,0,0,0,0,0,93,683,898,1150,1443,1342,1206,781,464,192,0,0,0,0,0,0,0,0,161,789,1040,1174,1482,1409,1121,791,391,201,0,0,0,0,0,0,0,22,266,837,1133,1016,1485,1327,1028,722,403,0,0,0,0,0,0,0,0,81,703,959,1235,1248,1255,971,1224,622,333,0,0,0,0,0,0,0,0,144,829,967,1341,1712,1504,1355,905,539,253,0,0,0,0,0,0,0,22,170,848,1110,1212,1559,1456,1168,821,464,207,0,0,0,0,0,0,0,102,323,784,1247,1092,1546,1414,1040,688,458,0,0,0,0,0,0,0,0,128,633,891,1104,1308,1396,1202,1167,590,291,0,0,0,0,0,0,0,10,245,688,926,1290,1547,1357,1151,784,593,251,0,0,0,0,0,0,0,77,119,836,986,1012,1470,1232,983,853,426,106,0,0,0,0,0,0,0,0,451,763,1102,1072,1201,1264,1047,583,370,0,0,0,0,0,0,0,27,145,537,944,1047,1003,1232,1072,850,400,101,0,0,0,0,0,0,0,37,36,785,723,1017,1361,1075,976,542,272,224,0,0,0,0,0,0,0,0,132,571,815,807,1062,1075,708,497,365,73,0,0,0,0,0,0,0,0,422,699,1060,771,1159,965,832,506,306,0,0,0,0,0,0,0,0,135,570,880,887,1077,1105,941,816,365,173,0,0,0,0,0,0,0,58,158,619,823,1140,1242,1064,1040,570,354,171,0,0,0,0,0,0,19,53,111,621,912,734,1239,1072,714,576,340,0,0,0,0,0,0,0,0,0,377,768,969,993,1046,976,998,428,319,0,0,0,0,0,0,0,0,65,558,957,944,1104,1083,1043,705,461,194,0,0,0,0,0,0,0,0,114,838,852,918,1275,1135,1012,673,364,117,0,0,0,0,0,0,0,59,320,682,859,857,1287,1263,835,614,381,0,0,0,0,0,0,0,0,177,560,875,1137,1223,1362,1299,1086,635,230,0,0,0,0,0,0,0,158,48,877,1208,1589,2086,2251,2254,1900,1198,506,0,0,0,0,0,0,30,0,601,3690,4095,4095,4095,4095,4095,4095,3408,2317,0,0,0,0,0,0,0,145,1074,3862,4095,4095,4095,4095,3951,2890,1891,102,0,0,0,0,0,0,0,240,2743,4095,4095,4095,4095,4095,4095,3952,2736,0,0,0,0,0,0,45,37,605,4095,4095,4095,4095,4095,4095,4051,3595,2503,0,0,0,0,0,0,0,154,823,4095,4095,4095,4095,4095,4095,4056,3577,2257,0,0,0,0,0,0,0,238,1507,4095,4095,4095,4095,4095,4095,4095,3245,976,0,0,0,0,0,0,0,363,3390,4095,4095,4095,4095,4095,4095,3952,2998,0,0,0,0,0,0,66,1,623,4095,4095,4095,4095,4095,4095,4095,4015,2543,0,0,0,0,0,0,0,59,938,4095,4095,4095,4095,4095,4095,4095,3356,1997,0,0,0,0,0,0,0,288,2032,4095,4095,4095,4095,4095,4095,4095,2893,236,0,0,0,0,0,0,0,604,3791,4095,4095,4095,4095,4095,4095,3490,2508,0,0,0,0,0,0,110,99,789,4095,4095,4095,4095,4095,4095,4095,3560,2323,0,0,0,0,0,0,0,250,1072,4095,4095,4095,4095,4095,4095,4095,3248,1523,0,0,0,0,0,0,0,400,2317,4095,4095,4095,4095,4095,4095,4095,2859,25,0,0,0,0,0,0,93,597,4095,4095,4095,4095,4095,4095,4095,3765,2576,0,0,0,0,0,0,220,138,834,4095,4095,4095,4095,4095,4095,4095,3555,2232,0,0,0,0,0,0,38,192,1116,4095,4095,4095,4095,4095,4095,4095,3232,1497,0,0,0,0,0,0,0,432,2604,4095,4095,4095,4095,4095,4095,3849,2800,0,0,0,0,0,0,0,112,654,4095,4095,4095,4095,4095,4095,4095,3841,2451,0,0,0,0,0,0,9,148,819,4095,4095,4095,4095,4095,4095,4095,3399,2309,0,0,0,0,0,0,44,272,1452,4095,4095,4095,4095,4095,4095,4095,3155,1191,0,0,0,0,0,0,0,356,2992,4095,4095,4095,4095,4095,4095,3919,2674,0,0,0,0,0,0,0,0,816,4095,4095,4095,4095,4095,4095,3786,3642,2385,0,0,0,0,0,0,0,294,842,4095,4095,4095,4095,4095,4095,4095,3403,2213,0,0,0,0,0,0,0,322,1584,4095,4095,4095,4095,4095,4095,4095,3223,762,0,0,0,0,0,0,6,466,3469,4095,4095,4095,4095,4095,4095,4095,2748,0,0,0,0,0,0,81,32,750,4095,4095,4095,4095,4095,4095,4095,3687,2357,0,0,0,0,0,0,0,257,885,4095,4095,4095,4095]

# pyplot.plot(buff)
# pyplot.show()

def convertUTCtoMEZ():
    # Austria-MESZ between:
    # Last March-Sunday at 02:00 MEZ
    # Last Oktober-Sunday at 03:00 MESZ
    mez = 1640624891 + (3600  * 24 * 90)
    t = time.gmtime(mez)
    month = t[1]

    if 3 <= month <= 10:
        if month == 3 and isLastSundayOfMonth(mez):
            if t[3] >= 2:
                mez = mez + 3600
        elif month == 10 and isLastSundayOfMonth(mez + 3600):
            mez = mez - 3600

    return mez


def isLastSundayOfMonth(mez) -> bool:
    t = time.gmtime(mez)
    currDay = t[2]
    diff = 0

    if t[1] == 3 or t[1] == 10:
        diff = 31 - currDay

    eomTime = mez + (3600 * 24 * diff)
    eom = time.gmtime(eomTime)
    weekDay = eom[6]
    diffToPrevSunday = 7 - (6 - weekDay)

    lastSunday = eom[2]
    if diffToPrevSunday < 7:
        lastSunday = time.gmtime(eomTime - (3600 * 24 * diffToPrevSunday))[2]

    return lastSunday == currDay


#print(time.localtime(convertUTCtoMEZ()))
print(time.gmtime(1664730491))
#1664730491